{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <h2 class="form-title">Add New Prescription</h2>

    <form method="post" action="{% url 'new_pill_form' slot_id=id %}" enctype="multipart/form-data" class="styled-form">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.name.id_for_label }}">Name:</label>
            {{ form.name }}
        </div>

        <div class="form-group">
            <label for="{{ form.dosage.id_for_label }}">Dosage:</label>
            {{ form.dosage }}
        </div>

        <div class="form-group">
            <label for="{{ form.quantity_initial.id_for_label }}">Quantity Initial:</label>
            {{ form.quantity_initial }}
        </div>

        <div class="form-group">
            <label for="{{ form.disposal_times.id_for_label }}">Disposal Times:</label>
            <div class="checkbox-container">
                <div class="scrollable-checkbox-list">
                    {% for value, label in form.fields.disposal_times.choices %}
                        <label class="checkbox-label" onclick="toggleSelection(this)">
                            <input type="checkbox" name="{{ form.disposal_times.name }}" value="{{ value }}" hidden>
                            <span class="time-label">{{ label }}</span>
                        </label>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        
        <div class="form-group">
            <label for="{{ form.timezone.id_for_label }}">Time Zone:</label>
            {{ form.timezone }}
        </div>  

        <div class="form-group">
            <label for="{{ form.image.id_for_label }}">Upload Pill Image:</label>
            {{ form.image }}
        </div>

        <div class="form-group">
            <button type="submit" class="submit-button-pill">Submit</button>
        </div>        

    </form>
</div>

<script>
    function toggleSelection(label) {
        let checkbox = label.querySelector("input[type='checkbox']");
        checkbox.checked = !checkbox.checked;
        label.classList.toggle("selected", checkbox.checked);
    }
</script>


{% load static %}
{% endblock %}
